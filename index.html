<!DOCTYPE html>
<html lang="uk">
<head>
  <meta charset="UTF-8">
  <meta name="viewport" content="width=device-width, initial-scale=1.0">

  <script src="https://telegram.org/js/telegram-web-app.js?58"></script>

  <title>–§–æ—Ä–º–∞ —Ñ—É—à–∫–∏</title>
  <style>
    body {
      font-family: sans-serif;
      background-color: #f9f9f9;
      padding: 20px;
      max-width: 500px;
      margin: auto;
    }
    h1 {
      text-align: center;
      color: #1b4d8a;
    }
    label {
      display: block;
      margin-top: 15px;
      font-weight: bold;
    }
    input, textarea, select {
      width: 100%;
      padding: 10px;
      margin-top: 5px;
      border: 1px solid #ccc;
      border-radius: 5px;
      font-size: 16px;
    }
    button {
      margin-top: 20px;
      width: 100%;
      padding: 12px;
      background-color: #1b4d8a;
      color: white;
      border: none;
      border-radius: 5px;
      font-size: 16px;
      cursor: pointer;
    }
    button:hover {
      background-color: #153d70;
    }
  </style>
</head>
<body>
  <h1>–ù–æ–≤–∞ —Ñ—É—à–∫–∞</h1>
  
  <!-- –î—ñ–∞–≥–Ω–æ—Å—Ç–∏—á–Ω–∞ –ø–∞–Ω–µ–ª—å -->
  <div id="debug-panel" style="background: #f0f0f0; padding: 10px; margin: 10px 0; border-radius: 5px; font-size: 12px;">
    <strong>üîß –î—ñ–∞–≥–Ω–æ—Å—Ç–∏–∫–∞:</strong>
    <div id="debug-info">–ó–∞–≤–∞–Ω—Ç–∞–∂–µ–Ω–Ω—è...</div>
    <button type="button" onclick="showDebugInfo()" style="background: #666; margin-top: 5px; padding: 5px 10px; font-size: 12px;">–û–Ω–æ–≤–∏—Ç–∏ –¥—ñ–∞–≥–Ω–æ—Å—Ç–∏–∫—É</button>
  </div>
  
  <form id="fushka-form">
    <label for="description">üìù –û–ø–∏—Å —Ñ—É—à–∫–∏</label>
    <textarea id="description" name="description" required></textarea>

    <label for="company">üè¢ –ù–∞–∑–≤–∞ –∫–æ–º–ø–∞–Ω—ñ—ó</label>
    <input id="company" name="company" required />

    <label for="location">üìç –õ–æ–∫–∞—Ü—ñ—è</label>
    <input id="location" name="location" required />

    <label for="date">üìÜ –î–∞—Ç–∞</label>
    <input id="date" name="date" type="text" required />

    <label for="hours">‚è∞ –ü–æ—á–∞—Ç–æ–∫ / –∫—ñ–Ω–µ—Ü—å</label>
    <input id="hours" name="hours" required />

    <label for="rate">üí∞ –°—Ç–∞–≤–∫–∞ (Kƒç/–≥–æ–¥)</label>
    <input id="rate" name="rate" type="number" required />

    <label for="type">üß§ –¢–∏–ø —Ä–æ–±–æ—Ç–∏</label>
    <input id="type" name="type" required />

    <label for="people">üë§ –ö—ñ–ª—å–∫—ñ—Å—Ç—å –ª—é–¥–µ–π</label>
    <input id="people" name="people" type="number" required />

    <label for="note">üìù –î–æ–¥–∞—Ç–∫–æ–≤–æ</label>
    <textarea id="note" name="note"></textarea>

    <button type="submit">–ù–∞–¥—ñ—Å–ª–∞—Ç–∏</button>
  </form>

  <script>
    // –§—É–Ω–∫—Ü—ñ—è –¥–ª—è –≤—ñ–¥–æ–±—Ä–∞–∂–µ–Ω–Ω—è –¥—ñ–∞–≥–Ω–æ—Å—Ç–∏—á–Ω–æ—ó —ñ–Ω—Ñ–æ—Ä–º–∞—Ü—ñ—ó
    function showDebugInfo() {
        const debugInfo = document.getElementById('debug-info');
        const telegram = window.Telegram || window.telegram;
        const webApp = telegram ? (telegram.WebApp || telegram.webApp) : null;
        
        const info = {
            'User Agent': navigator.userAgent,
            'Telegram –æ–±\'—î–∫—Ç': telegram ? '‚úÖ –ó–Ω–∞–π–¥–µ–Ω–æ' : '‚ùå –ù–µ –∑–Ω–∞–π–¥–µ–Ω–æ',
            'Telegram.WebApp': webApp ? '‚úÖ –ó–Ω–∞–π–¥–µ–Ω–æ' : '‚ùå –ù–µ –∑–Ω–∞–π–¥–µ–Ω–æ',
            'URL': window.location.href,
            '–ß–∞—Å –∑–∞–≤–∞–Ω—Ç–∞–∂–µ–Ω–Ω—è': new Date().toLocaleString('uk-UA'),
            'window.Telegram': window.Telegram ? '‚úÖ –Ñ' : '‚ùå –ù–µ–º–∞—î',
            'window.telegram': window.telegram ? '‚úÖ –Ñ' : '‚ùå –ù–µ–º–∞—î'
        };
        
        let debugText = '';
        for (let [key, value] of Object.entries(info)) {
            debugText += `<strong>${key}:</strong> ${value}<br>`;
        }
        debugInfo.innerHTML = debugText;
    }

    // –§—É–Ω–∫—Ü—ñ—è –¥–ª—è —ñ–Ω—ñ—Ü—ñ–∞–ª—ñ–∑–∞—Ü—ñ—ó Telegram WebApp
    function initTelegramWebApp() {
        console.log('–°–ø—Ä–æ–±–∞ —ñ–Ω—ñ—Ü—ñ–∞–ª—ñ–∑–∞—Ü—ñ—ó Telegram WebApp...');
        console.log('window.Telegram:', window.Telegram);
        console.log('window.Telegram.WebApp:', window.Telegram ? window.Telegram.WebApp : '–Ω–µ –∑–Ω–∞–π–¥–µ–Ω–æ');
        
        // –ü–µ—Ä–µ–≤—ñ—Ä—è—î–º–æ —Ä—ñ–∑–Ω—ñ –≤–∞—Ä—ñ–∞–Ω—Ç–∏ –¥–æ—Å—Ç—É–ø—É –¥–æ Telegram WebApp
        const telegram = window.Telegram || window.telegram;
        const webApp = telegram ? (telegram.WebApp || telegram.webApp) : null;
        
        console.log('–ê–ª—å—Ç–µ—Ä–Ω–∞—Ç–∏–≤–Ω–∞ –ø–µ—Ä–µ–≤—ñ—Ä–∫–∞ - telegram:', telegram);
        console.log('–ê–ª—å—Ç–µ—Ä–Ω–∞—Ç–∏–≤–Ω–∞ –ø–µ—Ä–µ–≤—ñ—Ä–∫–∞ - webApp:', webApp);
        
        if (telegram && webApp) {
            try {
                webApp.ready();
                webApp.expand();
                console.log('Telegram WebApp —É—Å–ø—ñ—à–Ω–æ —ñ–Ω—ñ—Ü—ñ–∞–ª—ñ–∑–æ–≤–∞–Ω–æ!');
                return true;
            } catch (error) {
                console.error('–ü–æ–º–∏–ª–∫–∞ —ñ–Ω—ñ—Ü—ñ–∞–ª—ñ–∑–∞—Ü—ñ—ó Telegram WebApp:', error);
                return false;
            }
        } else {
            console.warn('Telegram WebApp –Ω–µ –∑–Ω–∞–π–¥–µ–Ω–æ!');
            return false;
        }
    }

    // –Ü–Ω—ñ—Ü—ñ–∞–ª—ñ–∑–∞—Ü—ñ—è –ø—Ä–∏ –∑–∞–≤–∞–Ω—Ç–∞–∂–µ–Ω–Ω—ñ DOM
    document.addEventListener("DOMContentLoaded", function() {
        console.log('DOM –∑–∞–≤–∞–Ω—Ç–∞–∂–µ–Ω–æ, —ñ–Ω—ñ—Ü—ñ–∞–ª—ñ–∑—É—î–º–æ Telegram WebApp...');
        
        // –ü–æ–∫–∞–∑—É—î–º–æ –ø–æ—á–∞—Ç–∫–æ–≤—É –¥—ñ–∞–≥–Ω–æ—Å—Ç–∏–∫—É
        showDebugInfo();
        
        // –°–ø—Ä–æ–±–∞ —ñ–Ω—ñ—Ü—ñ–∞–ª—ñ–∑–∞—Ü—ñ—ó
        if (!initTelegramWebApp()) {
            // –Ø–∫—â–æ –Ω–µ –≤–¥–∞–ª–æ—Å—è —ñ–Ω—ñ—Ü—ñ–∞–ª—ñ–∑—É–≤–∞—Ç–∏ –æ–¥—Ä–∞–∑—É, —Å–ø—Ä–æ–±—É—î–º–æ —á–µ—Ä–µ–∑ –Ω–µ–≤–µ–ª–∏–∫—É –∑–∞—Ç—Ä–∏–º–∫—É
            setTimeout(function() {
                console.log('–ü–æ–≤—Ç–æ—Ä–Ω–∞ —Å–ø—Ä–æ–±–∞ —ñ–Ω—ñ—Ü—ñ–∞–ª—ñ–∑–∞—Ü—ñ—ó Telegram WebApp...');
                if (!initTelegramWebApp()) {
                    // –°–ø—Ä–æ–±–∞ —á–µ—Ä–µ–∑ –±—ñ–ª—å—à—É –∑–∞—Ç—Ä–∏–º–∫—É
                    setTimeout(function() {
                        console.log('–¢—Ä–µ—Ç—è —Å–ø—Ä–æ–±–∞ —ñ–Ω—ñ—Ü—ñ–∞–ª—ñ–∑–∞—Ü—ñ—ó Telegram WebApp...');
                        if (!initTelegramWebApp()) {
                            alert("Telegram WebApp –Ω–µ –∑–Ω–∞–π–¥–µ–Ω–æ! –í—ñ–¥–∫—Ä–∏–π—Ç–µ —Ñ–æ—Ä–º—É —á–µ—Ä–µ–∑ Telegram.");
                        }
                        showDebugInfo();
                    }, 2000);
                }
                // –û–Ω–æ–≤–ª—é—î–º–æ –¥—ñ–∞–≥–Ω–æ—Å—Ç–∏–∫—É –ø—ñ—Å–ª—è —Å–ø—Ä–æ–±–∏
                showDebugInfo();
            }, 1000);
        } else {
            // –û–Ω–æ–≤–ª—é—î–º–æ –¥—ñ–∞–≥–Ω–æ—Å—Ç–∏–∫—É —è–∫—â–æ —ñ–Ω—ñ—Ü—ñ–∞–ª—ñ–∑–∞—Ü—ñ—è —É—Å–ø—ñ—à–Ω–∞
            setTimeout(showDebugInfo, 500);
        }
    });

    // –û–±—Ä–æ–±–∫–∞ –≤—ñ–¥–ø—Ä–∞–≤–∫–∏ —Ñ–æ—Ä–º–∏
    document.getElementById('fushka-form').addEventListener('submit', function(e) {
        e.preventDefault();
        console.log('–§–æ—Ä–º–∞ –≤—ñ–¥–ø—Ä–∞–≤–ª—è—î—Ç—å—Å—è...');
        
        const formData = new FormData(this);
        const data = {};
        for (let [key, value] of formData.entries()) {
            data[key] = value;
        }
        
        console.log('–î–∞–Ω—ñ —Ñ–æ—Ä–º–∏:', data);
        console.log('–ü–µ—Ä–µ–≤—ñ—Ä—è—î–º–æ –Ω–∞—è–≤–Ω—ñ—Å—Ç—å Telegram WebApp...');
        console.log('window.Telegram:', window.Telegram);
        console.log('window.Telegram.WebApp:', window.Telegram ? window.Telegram.WebApp : '–Ω–µ –∑–Ω–∞–π–¥–µ–Ω–æ');
        
        // –ü–µ—Ä–µ–≤—ñ—Ä—è—î–º–æ —Ä—ñ–∑–Ω—ñ –≤–∞—Ä—ñ–∞–Ω—Ç–∏ –¥–æ—Å—Ç—É–ø—É –¥–æ Telegram WebApp
        const telegram = window.Telegram || window.telegram;
        const webApp = telegram ? (telegram.WebApp || telegram.webApp) : null;
        
        if (telegram && webApp) {
            try {
                webApp.sendData(JSON.stringify(data));
                webApp.close();
                console.log('–î–∞–Ω—ñ —É—Å–ø—ñ—à–Ω–æ –≤—ñ–¥–ø—Ä–∞–≤–ª–µ–Ω–æ –≤ Telegram!');
            } catch (error) {
                console.error('–ü–æ–º–∏–ª–∫–∞ –≤—ñ–¥–ø—Ä–∞–≤–∫–∏ –¥–∞–Ω–∏—Ö:', error);
                alert('–ü–æ–º–∏–ª–∫–∞ –≤—ñ–¥–ø—Ä–∞–≤–∫–∏ –¥–∞–Ω–∏—Ö: ' + error.message);
            }
        } else {
            console.error('Telegram WebApp –Ω–µ –∑–Ω–∞–π–¥–µ–Ω–æ –ø—Ä–∏ –≤—ñ–¥–ø—Ä–∞–≤—Ü—ñ!');
            alert("Telegram WebApp –Ω–µ –∑–Ω–∞–π–¥–µ–Ω–æ! –í—ñ–¥–∫—Ä–∏–π—Ç–µ —Ñ–æ—Ä–º—É —á–µ—Ä–µ–∑ Telegram.");
        }
    });
  </script>
</body>
</html>